{"version":3,"file":null,"sources":["../src/contentScript.js"],"sourcesContent":["/* global chrome */\n\nconst source = 'angular-batscanner-content-script'\nconst port = chrome.runtime.connect({\n  name: 'content-script'\n})\n\nport.onMessage.addListener(handleMessageFromDevtools)\nport.onDisconnect.addListener(handleDisconnect)\nwindow.addEventListener('message', handleMessageFromPage)\n\nwindow.postMessage({\n  hello: true,\n  source\n}, '*')\n\nfunction handleMessageFromDevtools (message) {\n  console.log('backend -> content-script')\n  console.log(message)\n\n  window.postMessage({\n    payload: message,\n    source\n  }, '*')\n}\n\nfunction handleMessageFromPage (evt) {\n  console.log('page -> content-script')\n\n  if (evt.data && evt.data.source === 'angular-batscanner') {\n    console.log('page -> content-script -> backend', evt.data)\n    port.postMessage(evt.data.payload)\n  }\n}\n\nfunction handleDisconnect () {\n  console.log('backend  -> content-script -> xxx')\n  window.removeEventListener('message', handleMessageFromPage)\n  window.postMessage({\n    payload: {\n      type: 'event',\n      evt: 'shutdown'\n    },\n    source\n  }, '*')\n}\n"],"names":["source","port","chrome","runtime","connect","onMessage","addListener","handleMessageFromDevtools","onDisconnect","handleDisconnect","window","addEventListener","handleMessageFromPage","postMessage","message","log","evt","data","payload","removeEventListener"],"mappings":";;;;;;AAAA;;AAEA,IAAMA,SAAS,mCAAf;AACA,IAAMC,OAAOC,OAAOC,OAAP,CAAeC,OAAf,CAAuB;QAC5B;CADK,CAAb;;AAIAH,KAAKI,SAAL,CAAeC,WAAf,CAA2BC,yBAA3B;AACAN,KAAKO,YAAL,CAAkBF,WAAlB,CAA8BG,gBAA9B;AACAC,OAAOC,gBAAP,CAAwB,SAAxB,EAAmCC,qBAAnC;;AAEAF,OAAOG,WAAP,CAAmB;SACV,IADU;;CAAnB,EAGG,GAHH;;AAKA,SAASN,yBAAT,CAAoCO,OAApC,EAA6C;UACnCC,GAAR,CAAY,2BAAZ;UACQA,GAAR,CAAYD,OAAZ;;SAEOD,WAAP,CAAmB;aACRC,OADQ;;GAAnB,EAGG,GAHH;;;AAMF,SAASF,qBAAT,CAAgCI,GAAhC,EAAqC;UAC3BD,GAAR,CAAY,wBAAZ;;MAEIC,IAAIC,IAAJ,IAAYD,IAAIC,IAAJ,CAASjB,MAAT,KAAoB,oBAApC,EAA0D;YAChDe,GAAR,CAAY,mCAAZ,EAAiDC,IAAIC,IAArD;SACKJ,WAAL,CAAiBG,IAAIC,IAAJ,CAASC,OAA1B;;;;AAIJ,SAAST,gBAAT,GAA6B;UACnBM,GAAR,CAAY,mCAAZ;SACOI,mBAAP,CAA2B,SAA3B,EAAsCP,qBAAtC;SACOC,WAAP,CAAmB;aACR;YACD,OADC;WAEF;KAHU;;GAAnB,EAMG,GANH;;;"}